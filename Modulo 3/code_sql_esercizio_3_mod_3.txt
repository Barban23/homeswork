use dapt0523;
create table store_1 
(
	id_store varchar(100),
    nome_store varchar(100) not null,
    indirizzo_store varchar(100) not null,
    recapito_store varchar(100) not null,
		primary key (id_store)
);
create table impiegato_1 
(
	codice_fiscale varchar(16),
    nome varchar(100) not null,
    carica varchar(100) not null,
    titolo_studio varchar(100),
    recapito_impiegato varchar(100) not null,
		primary key (codice_fiscale)
);

CREATE INDEX idx_impiegato_1_carica ON impiegato_1 (carica);

create table videogiochi_1 
(
	titolo varchar(100),
    sviluppatore varchar(100),
    genere varchar(100) not null,
    anno_distribuzione year not null,
    remake boolean not null,
    prezzo int not null,
		primary key (titolo, sviluppatore)
);

CREATE INDEX idx_videogiochi_1_titolo ON videogiochi_1 (titolo);
CREATE INDEX idx_videogiochi_1_sviluppatore ON videogiochi_1 (sviluppatore);

create table settore_1 
(
	id_settore varchar(100),
    titolo_1 varchar(100),
    sviluppatore_1 varchar(100),
    n_settore varchar(100),
    posizione_settore varchar(100),
    n_copie_settore int,
    n_copie_remake int,
    id_store_uni varchar(100),
		primary key (id_settore,id_store_uni),
			CONSTRAINT settore_1_ibfk_2
FOREIGN KEY (titolo_1,sviluppatore_1)
REFERENCES videogiochi_1 (titolo,sviluppatore)
);
create table timeline 
(
	cf_impiegato varchar(16),
	data_inizio date,
	data_fine date,
	code_store varchar(100) not null,
	carica_1 varchar(100) not null,
		primary key (cf_impiegato,data_inizio,data_fine),
			foreign key (code_store) references store_1(id_store) on update cascade on delete no action,
            CONSTRAINT impiegato_1_ibfk_2
FOREIGN KEY (carica_1)
REFERENCES impiegato_1 (carica)
);